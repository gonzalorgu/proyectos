<div class="reservation-form-container">
  <div class="form-header">
    <h3>{{ modalTitle }}</h3>
    <button class="close-btn" (click)="closeModal()" type="button">✕</button>
  </div>

  @if (data; as dress) {
    <div class="dress-info">
      <h3 class="dress-name">{{ dress.dressName }}</h3>
      <p class="dress-price">S/ {{ dress.dressPrice }} <span>{{ dress.purchaseType === 'alquiler' ? 'por día' : 'precio final' }}</span></p>
    </div>
  }

  <form [formGroup]="reservationForm" (ngSubmit)="onSubmit()">
    <div class="form-body">
      <div class="form-row">
        <div class="form-group">
          <label for="fechaInicio">Fecha de Inicio *</label>
          <input type="date" id="fechaInicio" class="form-control" formControlName="fechaInicio" [min]="minDate" [class.is-invalid]="hasError('fechaInicio')">
          @if (hasError('fechaInicio')) { <span class="error-message">{{ getErrorMessage('fechaInicio') }}</span> }
        </div>

        <div class="form-group">
          <label for="fechaFin">Fecha de Fin *</label>
          <input type="date" id="fechaFin" class="form-control" formControlName="fechaFin" [min]="minDate" [class.is-invalid]="hasError('fechaFin')">
          @if (hasError('fechaFin')) { <span class="error-message">{{ getErrorMessage('fechaFin') }}</span> }
        </div>
      </div>

      <div class="form-group">
        <label for="nombre">Nombre Completo *</label>
        <input type="text" id="nombre" class="form-control" formControlName="nombre" placeholder="Ej: María González" [class.is-invalid]="hasError('nombre')">
        @if (hasError('nombre')) { <span class="error-message">{{ getErrorMessage('nombre') }}</span> }
      </div>

      <div class="form-group">
        <label for="telefono">Teléfono *</label>
        <input type="tel" id="telefono" class="form-control" formControlName="telefono" placeholder="999999999" maxlength="9" [class.is-invalid]="hasError('telefono')">
        @if (hasError('telefono')) { <span class="error-message">{{ getErrorMessage('telefono') }}</span> }
      </div>

      <div class="form-group">
        <label for="email">Email *</label>
        <input type="email" id="email" class="form-control" formControlName="email" placeholder="correo@ejemplo.com" [class.is-invalid]="hasError('email')">
        @if (hasError('email')) { <span class="error-message">{{ getErrorMessage('email') }}</span> }
      </div>

      <div class="form-group">
        <label for="comentarios">Comentarios (opcional)</label>
        <textarea id="comentarios" class="form-control" formControlName="comentarios" rows="3" placeholder="Información adicional..."></textarea>
      </div>
    </div>

    <div class="form-footer">
      <button type="button" (click)="closeModal()" class="btn btn-secondary">
        Cancelar
      </button>
      <button type="submit" [disabled]="!reservationForm.valid" class="btn btn-primary">
        {{ confirmButtonText }}
      </button>
    </div>
  </form>
</div>